{"version":3,"sources":["main.js","js.cookie.js","imgwatcher.js"],"names":["scrollToY","tick","p","t","currentTime","time","easingEquations","easing","requestAnimFrame","window","scrollTo","scrollY","scrollTargetY","console","log","arguments","length","undefined","speed","Math","max","min","abs","easeOutSine","pos","sin","PI","easeInOutSine","cos","easeInOutQuint","pow","loadFonts","array","callback","progressMax","progress","showProgress","step","total","map","url","fetch","then","response","catch","error","factory","registeredInModuleLoader","define","amd","exports","_typeof","module","OldCookies","Cookies","api","noConflict","extend","i","result","attributes","key","init","converter","value","document","path","defaults","expires","Date","setMilliseconds","getMilliseconds","toUTCString","JSON","stringify","test","e","write","encodeURIComponent","String","replace","decodeURIComponent","escape","stringifiedAttributes","attributeName","cookie","cookies","split","rdecode","parts","slice","join","charAt","name","read","this","json","parse","set","get","call","getJSON","apply","remove","withConverter","fn","param1","param2","watchProgress","imgObject","settings","percentage","imageCount","createSettings","options","selector","always","done","images","option","loadImg","element","background","hasAttribute","src","getAttribute","loaded","Promise","resolve","reject","img","Image","onload","style","backgroundImage","setAttribute","onerror","imgWatcher","querySelectorAll","promises","all","fallback","setTimeout","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","body","querySelector","fontsLoaded","intro","fonts","file","location","href","classList","add","addEventListener","offsetTop","closeContact","_ref","target","removeEventListener"],"mappings":"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","file":"main.js","sourcesContent":["// jshint esversion: 6, asi:true\r\n// eslint-env es6\r\n\r\nwindow.requestAnimFrame = (() => {\r\n  const fallback = callback => window.setTimeout(callback, 1000 / 60)\r\n\r\n  return (\r\n    window.requestAnimationFrame ||\r\n    window.webkitRequestAnimationFrame ||\r\n    window.mozRequestAnimationFrame ||\r\n    fallback\r\n  )\r\n})()\r\n\r\nfunction scrollToY(scrollTargetY = 0, speed = 2000, easing = 'easeOutSine') {\r\n    const scrollY = window.scrollY\r\n    const time = Math.max(.1, Math.min(Math.abs(scrollY - scrollTargetY) / speed, .8));\r\n    const easingEquations = {\r\n        easeOutSine: pos => {\r\n            return Math.sin(pos * (Math.PI / 2))\r\n        },\r\n        easeInOutSine: pos => {\r\n            return (-0.5 * (Math.cos(Math.PI * pos) - 1))\r\n        },\r\n        easeInOutQuint: pos => {\r\n            if ((pos /= 0.5) < 1) {\r\n                return 0.5 * Math.pow(pos, 5)\r\n            }\r\n            return 0.5 * (Math.pow((pos - 2), 5) + 2)\r\n        }\r\n    }\r\n\r\n    let currentTime = 0\r\n\r\n    // add animation loop\r\n    function tick() {\r\n        let p, t\r\n        currentTime += 1 / 60\r\n\r\n        p = currentTime / time\r\n        t = easingEquations[easing](p)\r\n\r\n        if (p < 1) {\r\n            requestAnimFrame(tick)\r\n\r\n            window.scrollTo(0, scrollY + ((scrollTargetY - scrollY) * t))\r\n        } else {\r\n            console.log('scroll done')\r\n            window.scrollTo(0, scrollTargetY)\r\n        }\r\n    }\r\n\r\n    tick()\r\n}\r\n\r\nfunction loadFonts(array, callback) {\r\n    const progressMax = array.length\r\n    let progress = 0\r\n\r\n    const showProgress = (step, total) => {\r\n        if (step === total) {\r\n            callback()\r\n        }\r\n    }\r\n\r\n    array.map(url => {\r\n        fetch(url)\r\n        .then(response => {\r\n            console.log(response)\r\n            progress = progress + 1\r\n\r\n            showProgress(progress, progressMax)\r\n        })\r\n        .catch(error => console.error(error))\r\n    })\r\n}\r\n\r\n(() => {\r\n    'use strict'\r\n\r\n    const body = document.querySelector('body')\r\n\r\n    const fontsLoaded = Cookies.get('fontsLoaded')\r\n    const intro = document.querySelector('.intro')\r\n    const logo = document.querySelector('.logo')\r\n\r\n    const fonts = [\r\n      'jaapokki-regular.eot',\r\n      'jaapokki-regular.ttf',\r\n      'jaapokki-regular.woff',\r\n      'jaapokki-regular.woff2',\r\n      'kontanter.eot',\r\n      'kontanter.ttf',\r\n      'kontanter.woff',\r\n      'kontanter.woff2'\r\n    ].map(file => window.location.href + '/dist/fonts/' + file)\r\n\r\n    document.imgWatcher({\r\n      selector: '.preload',\r\n\r\n      progress: (img) => {\r\n        img.element.classList.add('loaded')\r\n      }\r\n    })\r\n\r\n    if(fontsLoaded) {\r\n      intro.classList.add('loaded')\r\n    } else {\r\n      loadFonts(fonts, () => {\r\n          intro.classList.add('loaded')\r\n          Cookies.set('fontsLoaded', 'true')\r\n      })\r\n    }\r\n\r\n    document.querySelector('.open-portfolio').addEventListener('click', () => {\r\n      scrollToY(document.querySelector('.portfolio').offsetTop, 1000, 'easeInOutSine')\r\n    })\r\n\r\n    document.querySelector('.open-contact').addEventListener('click', () => {\r\n      const closeContact = ({ target }) => {\r\n        body.classList.remove('show-contact')\r\n        target.removeEventListener('click', closeContact)\r\n      }\r\n      body.classList.add('show-contact')\r\n      document.querySelector('.close-contact').addEventListener('click', closeContact)\r\n    })\r\n})()\r\n","/*!\n * JavaScript Cookie v2.1.4\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","'use strict';\r\n\r\n(function (document) {\r\n  'use strict';\r\n\r\n  var createSettings = function createSettings(options) {\r\n    var defaults = {\r\n      selector: 'img',\r\n      progress: null,\r\n      always: null,\r\n      done: null,\r\n      images: []\r\n    };\r\n\r\n    var settings = defaults;\r\n\r\n    for (var option in options) {\r\n      settings[option] = options[option];\r\n    }return settings;\r\n  };\r\n\r\n  var loadImg = function loadImg(element, settings) {\r\n    var background = element.hasAttribute('data-background-src');\r\n    var src = background ? element.getAttribute('data-background-src') : element.getAttribute('src');\r\n    var imgObject = {\r\n      element: element,\r\n      src: src,\r\n      loaded: true\r\n    };\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      var img = new Image();\r\n\r\n      img.onload = function () {\r\n        if (background) {\r\n          element.style.backgroundImage = 'url(' + src + ')';\r\n        } else {\r\n          element.setAttribute('src', src);\r\n        }\r\n\r\n        watchProgress(imgObject, settings);\r\n\r\n        resolve(imgObject);\r\n      };\r\n\r\n      img.onerror = function () {\r\n        imgObject.loaded = false;\r\n\r\n        watchProgress(imgObject, settings);\r\n\r\n        reject(imgObject);\r\n      };\r\n\r\n      img.src = src;\r\n    });\r\n  };\r\n\r\n  var progress = 0;\r\n\r\n  function callback(fn, param1, param2) {\r\n    if (fn === null) return;\r\n\r\n    try {\r\n      fn(param1, param2);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  function watchProgress(imgObject, settings) {\r\n    var percentage = 0,\r\n        total = settings.imageCount,\r\n        errors = false;\r\n\r\n    if (progress === total) {\r\n      progress = 0;\r\n    } else {\r\n      progress++;\r\n\r\n      percentage = progress / total * 100;\r\n\r\n      callback(settings.progress, imgObject, percentage);\r\n    }\r\n  }\r\n\r\n  document.imgWatcher = function (options) {\r\n    var settings = createSettings(options);\r\n    var images = [].slice.call(document.querySelectorAll(settings.selector));\r\n    var promises = images.map(function (element) {\r\n      return loadImg(element, settings);\r\n    });\r\n\r\n    settings.imageCount = images.length;\r\n\r\n    Promise.all(promises).then(function (images) {\r\n      callback(settings.done, images);\r\n    }).catch(function (images) {\r\n      callback(settings.always, images);\r\n    });\r\n  };\r\n})(document);\r\n"],"sourceRoot":"assets/scripts/"}